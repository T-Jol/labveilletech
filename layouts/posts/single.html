{{ define "title" }}
  {{ .Title }} Â· {{ .Site.Title }}
{{ end }}
{{ define "content" }}
  <section class="container post">
    <article>
      <header style="margin-top: 6.4rem; margin-bottom: 3.2rem;">
        <div style="margin-bottom: 2rem;">
          <a href="/posts/" style="display: inline-flex; align-items: center; gap: 0.8rem; padding: 0.8rem 1.6rem; font-size: 1.5rem; font-weight: 500; color: var(--fg-color); background-color: var(--alt-bg-color); border: 1px solid var(--alt-bg-color); border-radius: 0.6rem; text-decoration: none; transition: all 0.3s ease;">
            <i class="fa-solid fa-arrow-left" aria-hidden="true"></i>
            <span>Retour aux articles</span>
          </a>
          <style>
            a[href="/posts/"]:hover {
              background-color: var(--link-color);
              color: var(--bg-color);
              border-color: var(--link-color);
              transform: translateX(-2px);
            }
          </style>
        </div>
        <div class="post-title" style="margin-bottom: 0.75em;">
          <h1 class="title" style="font-size: 4.2rem; line-height: 4.6rem; margin: 0;">
            <a class="title-link" href="{{ .Permalink | safeURL }}" style="color: inherit; text-decoration: none;">
              {{ .Title }}
            </a>
          </h1>
        </div>
        <div class="post-meta" style="display: flex; flex-wrap: wrap; gap: 1.5rem; align-items: center; padding-bottom: 1.5rem; border-bottom: 1px solid var(--alt-bg-color);">
          <div class="date" style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <span class="posted-on" style="font-size: 1.6rem; opacity: 0.7;">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" style="margin-left: 0.25rem;">
                {{ .Date | time.Format (.Site.Params.dateFormat | default "2 janvier 2006" ) }}
              </time>
            </span>
            <span class="reading-time" style="font-size: 1.6rem; opacity: 0.7;">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              <span style="margin-left: 0.25rem;">{{ i18n "reading_time" .ReadingTime }}</span>
            </span>
          </div>
          {{ if or .Params.categories .Params.tags }}
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            {{ with .GetTerms "categories" }}{{ partial "taxonomy/categories.html" . }}{{ end }}
            {{ with .GetTerms "tags" }}{{ partial "taxonomy/tags.html" . }}{{ end }}
          </div>
          {{ end }}
        </div>
      </header>

      <div class="post-content">
        <style>
          .post-content {
            font-size: 1.8rem;
            line-height: 1.8em;
          }
          .post-content h2 {
            font-size: 2.8rem;
            line-height: 3.2rem;
            margin: 4rem 0 2.5rem 0;
            font-weight: 600;
          }
          .post-content h3 {
            font-size: 2.4rem;
            line-height: 2.8rem;
            margin: 4rem 0 2.5rem 0;
            font-weight: 600;
          }
          .post-content p {
            margin: 2rem 0;
            font-size: 1.8rem;
            line-height: 1.8em;
            text-align: justify;
            text-justify: auto;
          }
          .post-content ul, .post-content ol {
            margin: 2rem 0;
            padding-left: 2rem;
          }
          .post-content li {
            margin: 1rem 0;
            font-size: 1.8rem;
            line-height: 1.8em;
          }
          .post-content strong {
            font-weight: 700;
          }
          @media only screen and (max-width: 768px) {
            .post-content {
              font-size: 1.6rem;
              line-height: 1.6em;
            }
            .post-content h2 {
              font-size: 2.6rem;
              line-height: 3rem;
            }
            .post-content h3 {
              font-size: 2.2rem;
              line-height: 2.6rem;
            }
            .post-content p {
              font-size: 1.6rem;
              line-height: 1.6em;
              margin: 1.5rem 0;
            }
            .post-content li {
              font-size: 1.6rem;
              line-height: 1.6em;
            }
          }
        </style>
        {{ if .Params.externalLink }}
        <div style="margin-bottom: 3rem; padding: 1.75rem; background: var(--alt-bg-color); border-left: 4px solid var(--link-color); border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
          <div style="margin-bottom: 1rem; font-weight: 600; font-size: 1.4rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7;">
            Article original
          </div>
          <a href="{{ .Params.externalLink }}" target="_blank" rel="noopener noreferrer" style="color: var(--link-color); text-decoration: none; font-size: 1.6rem; word-break: break-all; display: inline-block; padding: 0.75rem 0; line-height: 1.6; font-weight: 500; border-bottom: 2px solid transparent; transition: all 0.2s ease;">
            {{ .Params.externalLink }}
            <i class="fa-solid fa-external-link" aria-hidden="true" style="margin-left: 0.5rem; font-size: 0.875rem; opacity: 0.7;"></i>
          </a>
          <style>
            a[href="{{ .Params.externalLink }}"]:hover {
              border-bottom-color: var(--link-color);
              opacity: 0.9;
            }
          </style>
        </div>
        {{ end }}
        {{ if .Params.featuredImage }}
          <img src="{{ .Params.featuredImage | relURL }}" alt="Featured image" style="width: 100%; margin-bottom: 2rem; border-radius: 6px;"/>
        {{ end }}
        <div>
          {{ .Content }}
        </div>
      </div>

      <footer style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--alt-bg-color);">
        {{ partial "posts/series.html" . }}
        {{ partial "posts/disqus.html" . }}
        {{ partial "posts/commento.html" . }}
        {{ partial "posts/utterances.html" . }}
        {{ partial "posts/giscus.html" . }}
        {{ partial "posts/mastodon.html" . }}
        {{ partial "posts/telegram.html" . }}
        {{ partial "posts/cusdis.html" . }}
      </footer>
    </article>

    {{ partial "posts/math.html" . }}
  </section>
{{ end }}
